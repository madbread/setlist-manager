<div class="songlist-editor grid-padded">
  <h6>Setlists</h6>
  <div class="grid grid-padded">
    <form>
      <ul class="scrollable songlist-list">
        <li
          ng-click="songListVM.displaySongList(songList)"
          ng-repeat="songList in songListVM.songListsDB | orderBy:'title'"
          ng-bind="songList.title"
        ></li>
      </ul>
    </form>
  </div>
  <div class="grid grid-padded" ng-if="songListVM.editSongListItem">
    <form>
      <div class="form-row">
        <a
          ng-click="songListVM.deleteList()"
          class="hand float-right color-warning"
          title="Permanently Delete This Setlist"
        >[X]</a>
        <label for="songListTitle">Title</label>
        <input
          class="longer"
          id="songListTitle"
          ng-model="songListVM.editSongListItem.title">
      </div>

      <label>Songs:</label>
      <ul
        ui-sortable="songListVM.sortableSongs"
        ng-model="songListVM.songsSorted"
        class="songlist-songs"
      >
        <li
          ng-repeat="id in songListVM.songsSorted"
        >
          <span ng-bind="$index + 1"></span>)
          <span ng-bind="songListVM.songsDB[id].title"></span>
          [<span ng-bind="songListVM.songsDB[id].key"></span>]
          <span
            class="note text-tiny"
            ng-bind="songListVM.editSongListItem.notes[id]"
            ng-if="songListVM.editSongListItem.notes[id]"
            ng-click="songListVM.editNote(id)"
          ></span>
          <span
            ng-show="!songListVM.editSongListItem.notes[id] && songListVM.showIcons"
            ng-click="songListVM.addNote(id)"
            class="hand color-royal"
          >note</span>
          <span
            ng-show="songListVM.showIcons"
            ng-click="songListVM.removeSong(id)"
            class="icon-cancel hand color-warning text-tiny"
            title="Remove {{songListVM.songsDB[id].title}}"
          ></span>
        </li>
        <li class="align-right add-song-floating-text">
          <span
            class="text-tiny"
            title="Click a song from the list"
          >Add Song <span ng-bind="songListVM.songsSorted.length + 1"></span>
          ---></span>
        </li>
      </ul>

      <div
        class="add-note-text"
        ng-show="songListVM.editingNote"
        >
        Edit Note For <span ng-bind="songListVM.songsDB[songListVM.editingNoteId].title"></span><br>
        <input ng-model="songListVM.editSongListItem.notes[songListVM.editingNoteId]"> <button ng-click="songListVM.updateNote()" class="but-tiny">save</button>
      </div>

      <div
        class="add-note-text"
        ng-show="songListVM.addingNote"
        >
        Add Note For <span ng-bind="songListVM.songsDB[songListVM.addingNoteId].title"></span><br>
        <input ng-model="songListVM.newNoteText"> <button ng-click="songListVM.saveNewNote()" class="but-tiny">save</button>
      </div>

      <a ng-click="songListVM.showIcons = !songListVM.showIcons" href="#">
        <span ng-show="!songListVM.showIcons">Show</span><span ng-show="songListVM.showIcons">Hide</span> Song Controls
      </a>
    </form>

    <form>
      <h6 ng-click="songListVM.showFilters = !songListVM.showFilters" class="hand">
        <span ng-show="songListVM.showFilters">-</span>
        <span ng-show="!songListVM.showFilters">+</span>
        Filter Songs (<span title="Total songs after applying filters" ng-bind="songListVM.count"></span>)
      </h6>
      <div
        class="slide"
        ng-class="{'slide-show': songListVM.showFilters, 'slide-hide': !songListVM.showFilters}"
      >
        <label for="list-name-filter">Filter: </label>
        <input class="longer" id="list-name-filter" ng-model="songListVM.titleFilter" placeholder="title or singer">
        <br>
        <label for="player-filter">Player:</label>
        <select
          id="player-filter"
          ng-model="songListVM.playerFilter"
          ng-options="player for player in songListVM.playerOptions">
        </select>
        <span ng-show="songListVM.playerFilter !== songListVM.blankFilter">
          <label for="instrument-filter">Instrument:</label>
          <select
            id="instrument-filter"
            ng-model="songListVM.instrumentFilter"
            ng-options="instrument for instrument in songListVM.instrumentOptions">
          </select>
        </span>
        <br>
        <label for="instrument-filter">Key:</label>
        <select
          id="key-filter"
          ng-model="songListVM.keyFilter"
          ng-options="key for key in songListVM.keyOptions">
        </select>
        <button class="but-small" ng-click="songListVM.clearSongFilters()">clear all</button>
      </div>
      <ul class="scrollable song-list">
        <li
          ng-click="songListVM.addSelected(song)"
          ng-repeat="song in songListVM.songsArray | orderBy:'title' | filter:songListVM.titleFilter"
        >
          <span ng-bind="song.title"></span>
          [<span ng-bind="song.key"></span>]
        </li>
      </ul>
    </form>
  </div>


  <h6 ng-click="songListVM.toggleAddSongList()" class="hand">
    Add New Setlist
    <span ng-hide="songListVM.showAddSongList">+</span>
    <span ng-show="songListVM.showAddSongList">-</span>
  </h6>
  <div class="grid grid-padded">
    <form class="add-new-item" ng-show="songListVM.showAddSongList">
      <div class="form-row">
        <label for="songTitle">Title</label>
        <input class="longer" id="songTitle" ng-model="songListVM.newSongList.title">
      </div>
      <div class="but-row">
        <a
          ng-click="songListVM.showAddSongList = false"
          class="hand"
        >Cancel</a>
        <button ng-disabled="!songListVM.newSongList.title.length" ng-click="songListVM.addSongList()" class="but-selection">
          Add
        </button>
      </div>
    </form>

  </div>
</div>
